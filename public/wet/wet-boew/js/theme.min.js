/*!
 * Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v10.0.4 - 2021-11-18
 *
 */
!function(t,r,a){"use strict";function n(e){if(!e.content){for(var e=e,t=e.childNodes,a=r.createDocumentFragment();t[0];)a.appendChild(t[0]);e.content=a}}var i="wb-template",o="template",e=a.doc;a.tmplPolyfill=n,e.on("timerpoke.wb wb-init.wb-template",o,function(e){e=a.init(e,i,o);e&&(n(e),a.ready(t(e),i))}),a.add(o)}(jQuery,document,wb),function(a,r){"use strict";var n,t,i,o,s,l=r.doc,c="gc-subway",d=".provisional."+c,u="xxsmallview",p="xsmallview",f="smallview",g="mediumview",h="largeview",b="xlargeview",m="wb-inv",v=!1,w=r.html,y=function(e){if(e.length||(e=a(d)),a("main h1").length<2)return l.off(r.resizeEvents,y),void e.addClass("no-blink p-0");w.hasClass(g)||w.hasClass(h)||w.hasClass(b)?(v||x(e),n.addClass(m),i.prependTo(s),t.prependTo(o)):(w.hasClass(f)||w.hasClass(p)||w.hasClass(u))&&v&&(n.removeClass(m),i.remove(),a("h2:first-child",o).remove())},x=function(e){t=a("<h2 class='h3 hidden-xs visible-md visible-lg mrgn-tp-0'>Sections</h2>"),i=a("<div class='gc-subway-h1' aria-hidden='true'>"+n.text()+"</div>"),a("ul",e).first().wrap("<div class='gc-subway-menu-nav'></div>"),o=a(".gc-subway-menu-nav",e),e.nextUntil(".pagedetails, .gc-subway-section-end").wrapAll("<section class='provisional gc-subway-section'>"),s=e.next(),e.addClass("no-blink"),v=!0};l.on(r.resizeEvents,y),l.on("timerpoke.wb wb-init .gc-subway",d+".provisional",function(e){var t=r.init(e,c,d);t&&e.currentTarget===e.target&&(e=a(t),(t=(n=a("h1",e)).get(0))&&(t.id=t.id||r.getId(),r.addSkipLink(r.i18n("skip-prefix")+" "+t.textContent,{href:"#"+t.id})),y(e),r.ready(e,c))}),r.add(d)}(jQuery,(window,wb)),function(o,p){"use strict";var e=p.doc,f={},g={},h=function(e,t,a,r,n,i){if(!window.jsonpointer)return setTimeout(function(){h(e,t,a,r,n,i)},100),!1;i&&(a=jsonpointer.get(a,i)),o("#"+e).trigger({type:"json-fetched.wb",fetch:{response:a,status:r,xhr:n,refId:t}},this)};e.on("json-fetch.wb",function(e){var s,t,a=e.element||e.target,l=e.fetch||{url:""},r=l.url.split("#"),c=r[0],n=l.nocache,i=l.nocachekey||p.cacheBustKey||"wbCacheBust",d=r[1]||!1,u=l.refId;if(a===e.target||e.currentTarget===e.target){if(a.id||(a.id=p.getId()),s=a.id,d){if(91===(a=d.split("/")[0]).charCodeAt(0))return void o("#"+s).trigger({type:"postpone.wb-jsonmanager",postpone:{callerId:s,refId:u,dsname:a,selector:d.substring(a.length)}});l.url=c}n&&(n=i+"="+("nocache"===n?p.guid():p.sessionGUID()),c=-1!==c.indexOf("?")?c+"&"+n:c+"?"+n,l.url=c),Modernizr.load({load:"site!deps/jsonpointer"+p.getMode()+".js",complete:function(){if(c){if(!l.nocache){if(t=f[c])return void h(s,u,t,"success",void 0,d);if(g[c])return void g[c].push({callerId:s,refId:u,selector:d});g[c]=[]}l.dataType="json",l.jsonp&&(l.jsonp=!1),o.ajax(l).done(function(e,t,a){var r,n,i,o;if(!l.nocache)try{f[c]=e}catch(e){return}if(h(s,u,e,t,a,d),g[c])for(n=(o=g[c]).length,r=0;r!==n;r+=1)i=o[r],h(i.callerId,i.refId,e,t,a,i.selector)}).fail(function(e,t,a){o("#"+s).trigger({type:"json-failed.wb",fetch:{xhr:e,status:t,error:a,refId:u}},this)},this)}}})}})}(jQuery,wb),function(f,g,h){"use strict";function d(e,t,a){for(var r,n,i=a[t];r=i.shift();)(n=r.action)&&(e.trigger(n+"."+m,r),delete r.action)}var e=g.doc,u="wb-actionmng",o="."+u,t="[data-"+u+"]",b=u+"Rn",m=u+o,p={},v={},w={},a=["mapfilter","tocsv","loadJSON","patch","ajax","addClass","removeClass","tblfilter","withInput","run"].join("."+m+" ")+"."+m,y={op:"move",path:"{base}",from:"{base}/{qval}"},x=function(e,t,a){t[e]||(t[e]=[]),t[e].push(a)},k=function(e,t,a,r){for(var n,i,o,s,l,c=(a=f.isArray(a)?f.extend([],a):[a]).length,d=0;d!==c;d+=1)if(i=(n=a[d]).action){if(o=n.match,l=n.default,s=!1,o&&!l)throw"'match' and 'default' property need to be set";if(l&&t.length&&"string"==typeof o)try{s=(s=new RegExp(o).exec(t))||l}catch(e){}else s||!l||t||(s=l);switch(!n.qval&&s&&(n.qval=s),i){case"patch":var u=n.patches,p=n.base||"/";u||(u=[y],n.cumulative=!0),f.isArray(u)||(u=[u]),u=j(u,n.qval,p),n.patches=u;break;case"ajax":n.trigger&&r&&(n.trigger=!1),n.url=S(n.url,n.qval);break;case"tblfilter":n.value=S(n.value,n.qval)}x(e,v,n)}},j=function(e,t,a){var r,n,i,o=e.length,s=[];for(a=a||"/",r=0;r!==o;r+=1)n=e[r],i=f.extend({},n),n.path&&(i.path=S(n.path,t,a)),n.from&&(i.from=S(n.from,t,a)),n.value&&(i.value=S(n.value,t,a)),s.push(i);return s},S=function(e,t,a){return t?a?e.replace(/\{qval\}/,t).replace(/\{base\}/,a):e.replace(/\{qval\}/,t):e};e.on("do."+m,function(e){var t,a,r,n,i,o,s=e.element||e.target,l=s.id,c=e.actions||[];if((s===e.target||e.currentTarget===e.target)&&-1===s.className.indexOf(u)){for((r=(c=!f.isArray(c)?[c]:c).length)&&(t=f(s)).addClass(u),l&&p[l]&&d(t,l,p),a=0;a!==r;a+=1)(i=(n=c[a]).action)&&((o=n.target)?(n.trgbefore?x(o,p,n):x(o,v,n),(o=n.trggroup)&&x(o,w,n)):t.trigger(i+"."+m,n));l&&v[l]&&d(t,l,v),f(e.target).removeClass(u)}}),e.on("clean."+m,function(e){var t,a,r=e.element||e.target,n=e.trggroup;if((r===e.target||e.currentTarget===e.target)&&n&&w[n])for(t=w[n];a=t.shift();)delete a.action}),e.on(a,o,function(e,t){var a,r,n,i,o,s,l,c,d,u,p=e.type;if(m===e.namespace)switch(p){case"run":!function(e,t){var a,r,n,i,e=e.target,o=f(e),s=w[t.trggroup];if(s&&!o.hasClass(b)){for(o.addClass(b),r=s.length,a=0;a!==r;a+=1)(i=(n=s[a]).action)&&o.trigger(i+"."+m,n);o.removeClass(b)}}(e,t);break;case"tblfilter":!function(e,t){var a=e.target,r=f(t.source||a),n=t.column,i=parseInt(n,10),o=!!t.regex,e=!t.smart||!!t.smart,a=!t.caseinsen||!!t.caseinsen;if("TABLE"!==r.get(0).nodeName)throw"Table filtering can only applied on table";r.dataTable({retrieve:!0}).api().column(n=!0===i?i:n).search(t.value,o,e,a).draw()}(e,t);break;case"addClass":!function(e,t){e=f(t.source||e.target);t.class&&e.addClass(t.class)}(e,t);break;case"removeClass":!function(e,t){e=f(t.source||e.target);t.class&&e.removeClass(t.class)}(e,t);break;case"ajax":l=e,(c=t).container?d=f(c.container):(u=g.getId(),d=f("<div id='"+u+"'></div>"),f(l.target).after(d)),c.trigger&&d.attr("data-trigger-wet","true"),l=c.type||"replace",d.attr("data-ajax-"+l,c.url),d.one("wb-contentupdated",function(e,t){var a=e.currentTarget,e=a.getAttribute("data-trigger-wet");a.removeAttribute("data-ajax-"+t["ajax-type"]),e&&(f(a).find(g.allSelectors).addClass("wb-init").filter(":not(#"+a.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),a.removeAttribute("data-trigger-wet"))}),d.trigger("wb-update.wb-data-ajax");break;case"patch":c=(o=t).source,d=o.patches,s=!!o.cumulative,d&&(f.isArray(d)||(d=[d]),f(c).trigger({type:"patches.wb-jsonmanager",patches:d,fpath:o.fpath,filter:o.filter||[],filternot:o.filternot||[],cumulative:s}));break;case"mapfilter":o=e,s=f((i=t).source||o.target).get(0).geomap,o=i.filter,i=i.value,"aoi"===o&&s.zoomAOI(i),"layer"===o&&s.showLayer(i,!0);break;case"tocsv":!function(e,t){var a,r,n,i,o,s=f(e),e=s.get(0),l=e.classList.contains("wb-tables"),c="",t=t||(e.caption||"table")+".csv",d=e.rows,u=d.length,p=d[0].cells.length;if(l){for(u=(n=s.dataTable({retrieve:!0}).api()).rows()[0].length,r=0;r<p;r+=1)o=(o=d[0].cells[r].textContent).replace(/"/g,'""'),c=r?c+',"'+o+'"':c+'"'+o+'"';c+="\n"}for(a=0;a<u;a+=1){for(r=0;r<p;r+=1)l?-1!==(o=n.cell(a,r,{page:"all"}).data()).indexOf("<")&&((i=h.createElement("div")).innerHTML=o,o=i.textContent):o=d[a].cells[r].textContent,o=o.replace(/"/g,'""'),o+='"',c=r?c+',"'+o:c+'"'+o;c+="\n"}g.download(new Blob(["\ufeff"+c],{type:"text/plain;charset=utf-8"}),t)}(t.source,t.filename);break;case"loadJSON":r=(a=t).source,n=a.url,f(r).attr("data-wb-jsonmanager-reload",""),f(r).trigger({type:"json-fetch.wb",fetch:{url:n,nocache:a.nocache,nocachekey:a.nocachekey}});break;case"withInput":i=e,n=(r=t).cValue||f(r.srcInput).val()||"",a=r.dntwb,i=i.target,k(i.id,n,r.actions,a)}}),e.on("timerpoke.wb wb-init.wb-actionmng",t,function(e){var t,a,r,n,i,e=g.init(e,u,o);if(e){if(e=f(e),t=g.getData(e,u))for(r=(t=!f.isArray(t)?[t]:t).length,a=0;a!==r;a+=1)(i=(n=t[a]).trggroup)&&n.action&&x(i,w,n);g.ready(e,u)}}),g.add(t)}(jQuery,wb,document),function(p,n,o){"use strict";var f,g,h,b,m,v,w,y,d,a,r,x="wb-chtwzrd",k="."+x,s=x+"-replace",j=o.doc,S={},C={},A={en:{"chtwzrd-send":"Send<span class='wb-inv'> reply and continue</span>","chtwzrd-reset":"Restart from the beginning","chtwzrd-toggle":"Switch to wizard","chtwzrd-notification":"Close chat notification","chtwzrd-open":"Open chat wizard","chtwzrd-minimize":"Minimize chat wizard","chtwzrd-history":"Conversation history","chtwzrd-reply":"Reply","chtwzrd-controls":"Controls","chtwzrd-toggle-basic":"Switch to basic form","chtwzrd-waiting":"Waiting for message","chtwzrd-answer":"You have answered:"},fr:{"chtwzrd-send":"Envoyer<span class='wb-inv'> la réponse et continuer</span>","chtwzrd-reset":"Recommencer depuis le début","chtwzrd-toggle":"Basculer vers l&apos;assistant","chtwzrd-notification":"Fermer la notification de discussion","chtwzrd-open":"Ouvrir l&apos;assistant de discussion","chtwzrd-minimize":"Réduire l&apos;assistant de discussion","chtwzrd-history":"Historique de discussion","chtwzrd-reply":"Répondre","chtwzrd-controls":"Contrôles","chtwzrd-toggle-basic":"Basculer vers le formulaire","chtwzrd-waiting":"En attente d&apos;un message","chtwzrd-answer":"Vous avez répondu&nbsp;:"}},t=function(t){var e;t.data(x+"-src")?(e=t.data(x+"-src"),p.getJSON(e,function(e){c(t,S=e),i(t)})):(S=l(t),i(t))},i=function(e){b=localStorage.getItem("wb-chtwzrd-notif"),e.removeClass("hidden wb-inv").addClass(x+"-basic"),f=!(C={shortDelay:500,mediumDelay:750,longDelay:1250,xLongDelay:2e3,xxLongDelay:2500}),v=S.header.first,w=S.header.instructions||"",m=S.header.defaultDestination,y=S.questions[v],g=S.header.formType||"dynamic",h=!!S.header.inline,A={send:(A=A[p("html").attr("lang")||"en"])["chtwzrd-send"],reset:A["chtwzrd-reset"],toggle:A["chtwzrd-toggle"],notification:A["chtwzrd-notification"],trigger:A["chtwzrd-open"],minimize:A["chtwzrd-minimize"],conversation:A["chtwzrd-history"],reply:A["chtwzrd-reply"],controls:A["chtwzrd-controls"],toggleBasic:A["chtwzrd-toggle-basic"],waiting:A["chtwzrd-waiting"],answer:A["chtwzrd-answer"]},T(e,S.header.title);var t,a=p(k+"-basic"),r=p(k+"-bubble-wrap"),n=p(k+"-btn"),i=p(k+"-container"),o=p(".body",i),s=p(".history",i),l=p(".minimize",i),c=p(".reset",i),e=p(".basic-link",i),d=c,u=e;E(a),q(r),z(n),e.on("click",function(e){e.preventDefault();var t=p("legend:first",a);t.attr("tabindex","0"),s.attr("aria-live",""),I(a,"form"),i.stop().hide(),a.stop().show(function(){t.focus(),t.removeAttr("tabindex")}),p("body").removeClass(x+"-noscroll")}),p(k+"-link").on("click",function(e){e.preventDefault(),a.stop().hide(),t=p(":focus"),p(this).hasClass(x+"-bubble")||I(i,"wizard"),p(".bubble",r).removeClass("trans-pulse"),p("p",r).hide().removeClass("trans-left"),i.stop().show(),r.stop().hide(),n.prop("disabled",!0),h||p("body").addClass(x+"-noscroll"),s.length&&p(".conversation",i).scrollTop(s[0].scrollHeight),f||O(o),localStorage.setItem("wb-chtwzrd-notif",1)}),p(k+"-btn").on("click",function(e){e.preventDefault(),n.prop("disabled",!0),a.stop().hide(),t=p(":focus"),I(i,"wizard"),i.stop().show(),r.stop().hide(),i.find(":focusable").first().focus(),h||p("body").addClass(x+"-noscroll"),s.length&&p(".conversation",i).scrollTop(s[0].scrollHeight),f||O(o)}),h?p(k+"-link").click():i.on("keydown",function(e){9===e.keyCode&&(e.shiftKey?d.is(":focus")&&(e.preventDefault(),u.focus()):u.is(":focus")&&(e.preventDefault(),d.focus())),27===e.keyCode&&l.click()}),j.on("click",k+"-container .btn-send",function(e){"submit"!==p(this).attr("type")&&(e.preventDefault(),(e=p("input:checked",o)).length||(e=p("input:first",o)).attr("checked",!0),N(o,B(e),!1))}),c.on("click",function(e){e.preventDefault(),I(p(k+"-container"),"wizard")}),l.on("click",function(e){e.preventDefault(),i.stop().hide(),n.prop("disabled",!1),r.stop().show(),p("body").removeClass(x+"-noscroll"),t.focus()})},E=function(e){var r=p("form",e),t=p("fieldset",e),a=t.first();"dynamic"===g&&(a.addClass(x+"-first-q"),t.not(k+"-first-q").hide()),e.hide(),p("input",r).prop("checked",!1),r.append("<button class='btn btn-sm btn-link "+x+"-link mrgn-rght-sm'>"+A.toggle+"</button>"),p("input",r).on("change",function(){var e,t=B(p(this)),a=p("#"+t.qNext,r);"dynamic"===g&&(e=p(this).closest("fieldset"),!a.is(":hidden")&&e.next().attr("id")===a.attr("id")&&"none"!==t.qNext||e.nextAll("fieldset").hide().find("input").prop("checked",!1),"none"!==t.qNext&&p("#"+t.qNext).show(),""!==t.url&&r.attr("action",t.url))})},q=function(t){var e,a=p("#wb-info"),r=p(k+"-link",t);S.header.avatar&&r.css("background-image","url("+S.header.avatar+")"),t.fadeIn("slow"),a.addClass(x+"-mrgn"),a.length&&((e=function(e){p(n).scrollTop()>=p(document).outerHeight()-p(n).outerHeight()-a.outerHeight()?e.css({bottom:a.outerHeight()-(p(document).outerHeight()-p(n).outerHeight()-p(n).scrollTop())+30}):e.css({bottom:30})})(t),p(n).on("resize scroll",function(){e(t)})),p(".notif",t).on("click",function(){r.click()}),p(".notif-close",t).on("click",function(e){e.preventDefault(),p(this).parent().hide(),t.focus(),localStorage.setItem("wb-chtwzrd-notif",1)})},z=function(e){e.attr("aria-controls",x+"-container")},l=function(e){var t=p("form",e),a=p("h2",e).first(),r=p("p:not("+k+"-greetings):not("+k+"-farewell)",t).first(),n="btn-former-send",i={},l={},o=p("fieldset",e);return e.data(x),(i=e.data(x)?e.data(x):{}).inline=e.hasClass("wb-chtwzrd-inline"),i.avatar=e.data(x+"-avatar"),i.defaultDestination=t.attr("action"),i.name=t.attr("name"),i.method=t.attr("method"),i.form={},i.form.title=a.html(),i.title=D(a,i.form.title),i.greetings=p("p"+k+"-greetings",t).html(),i.farewell=p("p"+k+"-farewell",t).html(),i.form.sendButton=p("input[type=submit]",t).length?p("input[type=submit]",t).addClass(n).val():p("button[type=submit]",t).addClass(n).html(),i.sendButton=D(p("."+n,t),i.form.sendButton),r.length&&(i.form.instructions=r.html(),i.instructions=D(r,i.form.instructions)),i.first=i.first||o.first().attr("id"),o.each(function(){var e=p(this),t=p("legend",e),a=p("label",e),r=this.id,n=p("input[type=radio]",e).length?"radio":"checkbox",o=[],s="",e={};a.each(function(e){var t=p("input",p(this)),a={},r=t.attr("name"),n=t.data(x+"-url"),i=t.siblings("span:not(.no-"+x+")").html();e||(s=r),a.content=i,a.value=t.val(),a.next=t.data(x+"-next"),n&&(a.url=n),o.push(a)}),e.name=s,e.input=n,e.formLabel=t.html(),e.label=D(t,e.formLabel),e.choices=o,l[r]=e}),{header:i,questions:l}},T=function(e,t){e.after("<div class='"+x+"-bubble-wrap'><a href='#"+x+"-container' aria-controls='"+x+"-container' class='"+x+"-link bubble trans-pulse' role='button'>"+A.trigger+"</a>"+(b?"":"<p class='trans-left'><span class='notif'>"+t+"</span> <a href='#' class='notif-close' title='"+A.notification+"' aria-label='"+A.notification+"' role='button'>&times;</a></p>")+"</div>"),e.next(k+"-bubble-wrap").after("<aside id='"+x+"-container' class='modal-content overlay-def "+x+"-container "+(h?" wb-chtwzrd-contained":"")+"'></aside>");e=p(k+"-container");e.append("<header class='modal-header header'><h2 class='modal-title title'>"+t+"</h2><button type='button' class='reset' title='"+A.reset+"'> <span class='glyphicon glyphicon-refresh'></span><span class='wb-inv'>"+A.reset+"</span></button><button type='button' class='minimize' title='"+A.minimize+"'><span class='glyphicon glyphicon-chevron-down'></span><span class='wb-inv'>"+A.minimize+"</span></button></header>"),e.append("<form class='modal-body body' method='GET'></form>");e=p(".body",e);e.append("<div class='conversation'><section class='history' aria-live='assertive'><h3 class='wb-inv'>"+A.conversation+"</h3></section><section class='reply'><h3 class='wb-inv'>"+A.reply+"</h3><div class='inputs-zone'></div></section><div class='form-params'></div></div>"),e.append("<section class='controls'><h3 class='wb-inv'>"+A.controls+"</h3><div class='row'><div class='col-xs-12'><button class='btn btn-primary btn-block btn-send' type='button'>"+A.send+"</button></div></div><div class='row'><div class='col-xs-12 text-center mrgn-tp-sm'><a href='#"+x+"-basic' class='btn btn-sm btn-link basic-link' role='button'>"+A.toggleBasic+"</a></div></div></section>"),e.attr("name",S.header.name+"-chat"),e.attr("method",S.header.method),r=p(".btn-send ",e).html()},c=function(e,t){e.html("");var a="<h2>"+t.header.title+"</h2>",r="<p>"+t.header.instructions+"</p>",n=">"+t.header.sendButton+"</button>";t.header.form.title,a="<h2 data-"+s+"='"+t.header.title+"'>"+t.header.form.title+"</h2>",e.append(a+"<form class='mrgn-bttm-xl' action='"+t.header.defaultDestination+"' name='"+t.header.name+"' method='"+(t.header.method||"GET")+"'></form>");var i=p("form",e);t.header.form.instructions,r="<p data-"+s+"='"+t.header.instructions+"'>"+t.header.form.instructions+"</p>",i.append("<p class='wb-chtwzrd-greetings wb-inv'>"+t.header.greetings+"</p>"+r),p.each(t.questions,function(e,a){var r=o.getId(),t="<legend>"+a.label+"</legend>";a.formLabel,a.formLabel&&(t="<legend data-"+s+"='"+a.label+"'>"+a.formLabel+"</legend>"),i.append("<fieldset id='"+e+"' class='"+r+"'>"+t+"<ul class='list-unstyled mrgn-tp-md'></ul></fieldset>");var n=p("."+r,i);p.each(a.choices,function(e,t){r=o.getId(),p("ul",n).append("<li><label><input type='"+a.input+"' value='"+t.value+"' id ='"+r+"' name='"+a.name+"' data-value='"+t.content+"' /> <span>"+t.content+"</span>"),p("#"+r,n).attr("data-"+x+"-next",t.next),t.url,t.url&&p("#"+r,n).attr("data-"+x+"-url",t.url)})}),t.header.form.sendButton,n=" data-"+s+"='"+t.header.sendButton+"'>"+t.header.form.sendButton+"</button>",i.append("<p class='wb-chtwzrd-farewell wb-inv'>"+t.header.farewell+"</p><br/><button type='submit' class='btn btn-sm btn-primary'"+n),void 0!==S.header.first&&S.header.first||(S.header.first=p("fieldset",i).first().attr("id"))},I=function(e,t){"wizard"===t?(t=p(".conversation",e),n.clearTimeout(d),n.clearTimeout(a),f=!1,m=S.header.defaultDestination,v=S.header.first,w=S.header.instructions||"",y=S.questions[v],p(".history, .form-params",t).html(""),p(".btn-send",e).attr("type","button").html(r),p(".history",t).attr("aria-live","assertive"),O(p(".body",e))):(e=p("fieldset",e),"dynamic"===g&&(e.not(":first").hide(),p("input",e).prop("checked",!1)))},O=function(n){var i=p(".history",n),o=p(".inputs-zone",n),s=p(".conversation",n),l=p(".btn-send",n),e=""!==v||""!==w||"last"===y?"p":"h4";f=!0,l.prop("disabled",!0),o.html(""),i.append("<div class='row mrgn-bttm-md'><div class='col-xs-9'><"+e+" class='mrgn-tp-0 mrgn-bttm-0'><span class='avatar'></span><span class='question'></span></"+e+"></div></div>");var c=p(".question:last",i);u(c);e=C.longDelay;h&&""!==v?e=C.xLongDelay:""===v&&""!==w&&(e=C.xxLongDelay),d=setTimeout(function(){""!==v?(c.html(S.header.greetings),v="",O(n)):""!==w?(c.html(w),w="",O(n)):"last"===y?(c.html(S.header.farewell),l.attr("type","submit").prop("disabled",!1).html(S.header.sendButton+"&nbsp;<span class='glyphicon glyphicon-chevron-right small'></span>"),n.attr("action",m)):(c.html(y.label),y.input="radio",a=setTimeout(function(){o.append("<fieldset><legend class='wb-inv'>"+y.label+"</legend><div class='row'><div class='col-xs-12'><ul class='list-unstyled mrgn-tp-sm choices'></ul></div></div></fieldset>");for(var e=0;e<y.choices.length;e++){var t=y.choices[e];p(".choices",o).append("<li><label><input type='"+y.input+"' value='"+t.value+"' name='"+y.name+"' data-"+x+"-next='"+t.next+"'"+(void 0===t.url?"":" data-"+x+"-url='"+t.url+"'")+(e?"":"checked ")+"/> <span>"+t.content+"</span></label></li>")}l.prop("disabled",!1);var a=s[0].scrollHeight,r=p(".reply",n);r.length&&r.outerHeight()+c.outerHeight()>s.innerHeight()&&(a=i[0].scrollHeight-c.outerHeight()-42),s.scrollTop(a)},C.mediumDelay)),s.scrollTop(s[0].scrollHeight)},e)},N=function(e,t){var a=o.getId(),r=p(".history",e);r.append("<div class='row mrgn-bttm-md'><div class='col-xs-9 col-xs-offset-3'><div class='message text-right pull-right' id='"+a+"'><p class='mrgn-bttm-0'><span class='wb-inv'>"+A.answer+" </span>"+t.value+"</p></div></div></div>"),p(".form-params",e).append("<input type='hidden' name='"+t.name+"' value='"+t.val+"' data-value='"+t.value+"' />"),f=!1,""!==t.url&&(m=t.url);var t=t.qNext,n=p("#"+a,r);y="none"===t?"last":S.questions[t],p(".btn-send",e).prop("disabled",!0),n.attr("tabindex","0"),d=setTimeout(function(){p(".inputs-zone",e).remove("fieldset"),n.focus(),n.removeAttr("tabindex"),O(e)},C.shortDelay)},u=function(e){e.html("<span class='loader-typing' aria-label='"+A.waiting+"'><span class='loader-dot dot1'></span><span class='loader-dot dot2'></span><span class='loader-dot dot3'></span></span>")},D=function(e,t){e=e.data(s);return e||t},B=function(e){var t=e.data(x+"-next"),a=e.data(x+"-url");return{qNext:t,name:e.attr("name"),val:e.val(),url:a||"",value:e.next().html()}};j.on("timerpoke.wb wb-init.wb-chtwzrd",k+".provisional",function(e){e=o.init(e,x,k);e&&(e=p(e),t(e),o.ready(e,x))}),o.add(k)}(jQuery,window,wb),function(S,C){"use strict";var e,d="wb-data-json",u="wb-json",t=["[data-json-after]","[data-json-append]","[data-json-before]","[data-json-prepend]","[data-json-replace]","[data-json-replacewith]","[data-"+u+"]"],l=["after","append","before","prepend","val"],c=/(href|src|data-*|pattern|min|max|step|low|high)/,p=/(checked|selected|disabled|required|readonly|multiple|hidden)/,a=t.length,f=t.join(","),g=d+"-queue",r=C.doc,h=function(e,t,a,r,n){S(e).trigger({type:"json-fetch.wb",fetch:{url:t,refId:a,nocache:r,nocachekey:n}})},A=function(e,t,a){var r,n,i,o,s,l,c,d,u,p,f,g=t.mapping||[{}],h=t.filter||[],b=t.filternot||[],m=t.queryall,v=t.tobeclone,w=e.className,y=e,x=t.source?document.querySelector(t.source):e.querySelector("template"),k=(a=!S.isArray(a)?"object"!=typeof a?[a]:S.map(a,function(e,t){return"object"!=typeof e||S.isArray(e)?e={"@id":t,"@value":e}:e["@id"]||(e["@id"]=t),[e]}):a).length,j=(g=!S.isArray(g)?[g]:g).length;if("TABLE"===e.tagName&&g&&-1!==w.indexOf("wb-tables-inited")&&"string"==typeof g[0]){for(f=S(e).dataTable({retrieve:!0}).api(),r=0;r<k;r+=1)if(n=a[r],E(n,h,b)){for(l="/"+r,p=[],i=0;i<j;i+=1)p.push(jsonpointer.get(a,l+g[i]));f.row.add(p)}f.draw()}else if(x)for(x.content||C.tmplPolyfill(x),t.appendto&&(y=S(t.appendto).get(0)),r=0;r<k;r+=1)if(n=a[r],E(n,h,b)){for(l="/"+r,c=(v?x.content.querySelector(v):x.content).cloneNode(!0),m&&(d=c.querySelectorAll(m)),i=0;i<j||0===i;i+=1)o=g[i],u=d?d[i]:o.selector?c.querySelector(o.selector):c,(s=o.attr)&&(u.hasAttribute(s)||u.setAttribute(s,""),u=u.getAttributeNode(s)),p="string"==typeof n?n:"string"==typeof o?jsonpointer.get(a,l+o):jsonpointer.get(a,l+o.value),o.placeholder&&(p=(u.textContent||"").replace(o.placeholder,p)),S.isArray(p)?A(u,o,p):o.isHTML?u.innerHTML=p:u.textContent=p;y.appendChild(c)}},E=function(e,t,a){var r,n,i,o=t.length,s=a.length,l=!1;if(o||s){for(r=0;r<o;r+=1)if(n=t[r],i=b(jsonpointer.get(e,n.path),n.value),n.optional)l=l||i;else{if(!i)return!1;l=!0}if(o&&!l)return!1;for(r=0;r<s;r+=1)if(n=a[r],(i=b(jsonpointer.get(e,n.path),n.value))&&!n.optional||i&&n.optional)return!1}return!0},b=function(e,t){switch(typeof e){case"undefined":return!1;case"boolean":case"string":case"number":return e===t;case"object":if(null===e)return null===t;var a,r;if(S.isArray(e)){if(S.isArray(t)||e.length!==t.length)return!1;for(a=0,r=e.length;a<r;a++)if(!b(e[a],t[a]))return!1;return!0}var n=i(t).length;if(i(e).length!==n)return!1;for(a=0;a<n;a++)if(!b(e[a],t[a]))return!1;return!0;default:return!1}},i=function(e){if(S.isArray(e)){for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=""+a;return t}if(Object.keys)return Object.keys(e);for(var r in t=[],e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};r.on("json-failed.wb",f,function(){throw"Bad JSON Fetched from url in "+d}),Modernizr.load({test:"content"in document.createElement("template"),nope:"site!deps/template"+C.getMode()+".js"}),r.on("timerpoke.wb wb-init.wb-data-json wb-update.wb-data-json json-fetched.wb",f,function(e){if(e.currentTarget===e.target)switch(e.type){case"timerpoke":case"wb-init":!function(e){var t=C.init(e,d,f);if(t){for(var a,r,n,i,o=["before","replace","replacewith","after","append","prepend"],s=o.length,l=[],e=S(t),c=0;c!==s;c+=1)null!==(i=t.getAttribute("data-json-"+(a=o[c])))&&l.push({type:a,url:i});if(C.ready(e,d),(r=C.getData(e,u))&&r.url)l.push(r);else if(r&&S.isArray(r))for(s=r.length,c=0;c!==s;c+=1)l.push(r[c]);for(e.data(g,l),s=l.length,c=0;c!==s;c+=1)n=l[c],h(t,n.url,c,n.nocache,n.nocachekey)}}(e);break;case"wb-update":!function(e){var t=e.target,a=S(t),r=a.data(g),n=r.length,e=e["wb-json"];if(!e.url||!e.type&&!e.source)throw"Data JSON update not configured properly";r.push(e),a.data(g,r),h(t,e.url,n)}(e);break;default:!function(e){var t=e.target,a=S(t),r=a.data(g),n=e.fetch,i=r[n.refId],o=i.type,s=i.prop||i.attr,e=i.showempty,r=n.response,n=typeof r;if(e||"undefined"!=n){if(e&&"undefined"==n&&(r=""),n=jQuery.ajaxSettings.cache,jQuery.ajaxSettings.cache=!0,o)if("replace"===o)a.html(r);else if("replacewith"===o)a.replaceWith(r);else if("addclass"===o)a.addClass(r);else if("removeclass"===o)a.removeClass(r);else if("prop"===o&&s&&p.test(s))a.prop(s,r);else if("attr"===o&&s&&c.test(s))a.attr(s,r);else{if("function"!=typeof a[o]||-1===l.indexOf(o))throw d+" do not support type: "+o;a[o](r)}else o="template",A(t,i,r),i.trigger&&a.find(C.allSelectors).addClass("wb-init").filter(":not(#"+t.id+" .wb-init .wb-init)").trigger("timerpoke.wb");jQuery.ajaxSettings.cache=n,a.trigger("wb-contentupdated",{"json-type":o,content:r})}}(e)}return!0});for(e=0;e!==a;e+=1)C.add(t[e])}(jQuery,(window,wb)),function(r,n){"use strict";var i="wb-doaction",o="a[data-"+i+"],button[data-"+i+"]",s="do.wb-actionmng",l=n.doc;l.on("click",o,function(e){var t=e.target,a=r(t);if("BUTTON"===(t=e.currentTarget!==e.target?(a=a.parentsUntil("main",o))[0]:t).nodeName||"A"===t.nodeName)return t.id||(t.id=n.getId()),n.isReady?a.trigger({type:s,actions:n.getData(a,i)}):l.one("wb-ready.wb",function(){a.trigger({type:s,actions:n.getData(a,i)})}),!1})}(jQuery,(window,wb)),function(q,E,z){"use strict";function A(e,t){var a=t.$selElm,r=t.name,n=t.value;r&&t.provEvt.setAttribute("name",r),n&&a.val(n),a.attr("data-"+i,i)}function T(e,t){var a=q(t.origin),e=q(e.target).data(V),r=t.toggle,r=q.extend({},r=r&&"string"==typeof r?{selector:r}:r,e.toggle);a.addClass("wb-toggle"),a.trigger("toggle.wb-toggle",r),r.type="off",a.one(F,function(){a.addClass("wb-toggle"),a.trigger("toggle.wb-toggle",r),a.removeClass("wb-toggle")})}function I(e,t){var a,r,n,i,o,s,l,c=t.outputctnrid,d=t.actions,u=t.lblselector,p=!!t.required,f=!t.noreqlabel,g=t.items,h=e.target,b=q(h),m=t.source,v=b.data(V).i18n,w=t.attributes,y=z.getId(),x="<legend",e="</span>",k="<fieldset id='"+y+"' data-"+Z+"='"+h.id+"' "+_+"='"+m.id+"' class='"+B+" chkbxrdio-grp mrgn-bttm-md'",j="",S=t.typeRadCheck,C=t.inline,A=t.gcChckbxrdio,E=L+y;if(w&&"object"==typeof w)for(r in w)Object.prototype.hasOwnProperty.call(w,r)&&(k+=" "+r+"='"+w[r]+"'");for(m=q(k+"></fieldset>"),C&&m.addClass("form-inline"),A&&m.addClass("gc-chckbxrdio"),p&&f&&(x+=" class='required'",e+=" <strong class='required'>("+v.required+")</strong>"),x+=">",e+="</legend>",u?(a=q("<div>"+t.label+"</div>").find(u),m.append(x+a.html()+e).append(a.nextAll()),a=a.prevAll()):m.append(q(x+t.label+e)),A&&!C&&(l="closed"),r=0,n=g.length;r!==n;r+=1)if((s=g[r]).group)for("open"===l&&(j+="</ul>",l="closed"),j+="<p>"+s.label+"</p>","closed"===l&&(j+="<ul class='list-unstyled lst-spcd-2'>",l="open"),o=s.group.length,i=0;i!==o;i+=1)j+=re(s.group[i],E,S,C,A,p);else 0===r&&"closed"===l&&(j+="<ul class='list-unstyled lst-spcd-2'>",l="open"),j+=re(s,E,S,C,A,p);"open"===l&&(j+="</ul>"),m.append(j),q("#"+c).append(m),a&&m.before(a),d&&0<d.length&&m.data(Y,d),ee(b,$,y)}var O,N="wb-fieldflow",l="."+N,c=N+"-form",D=N+"-sub",B=N+"-init",e="."+B,L=N+z.getId(),R="[name^="+L+"]",H=N+"-label",M=N+"-header",t="."+c,a="wb-init"+l,P="draw"+l,J="action"+l,Q="submit"+l,U="submited"+l,d="ready"+l,F="clean"+l,K="reset"+l,W="createctrl"+l,$=N+"-register",G=N+"-hdnfld",V=N+"-config",Y=N+"-push",X=N+"-submit",Z=N+"-origin",_="data-"+N+"-source",i=N+"-flagoptvalue",r=z.doc,u={toggle:{stateOn:"visible",stateOff:"hidden"},i18n:{en:{btn:"Continue",defaultsel:"Make your selection...",required:"required"},fr:{btn:"Allez",defaultsel:"Sélectionnez dans la liste...",required:"obligatoire"}},action:"ajax",prop:"url"},n=[["redir","query","ajax","addClass","removeClass","removeClass","append","tblfilter","toggle"].join("."+J+" ")+"."+J,["ajax","toggle","redir","addClass","removeClass"].join("."+Q+" ")+"."+Q,["tblfilter",N].join("."+P+" ")+"."+P,["select","checkbox","radio"].join("."+W+" ")+"."+W].join(" "),ee=function(e,t,a,r){var n=e.data(t);return(n=!n||r?[]:n).push(a),e.data(t,n)},te=function(e,t){for(var a,r,n,i,o,s,l,c,d,u,p,f,g=e.get(),h=g.length,b=[],m=0;m!==h;m+=1){if(i=null,r=n="",c=(a=g[m]).firstChild,s=(l=a.childNodes).length,!c)throw"You have a markup error, There may be an empyt <li> elements in your list.";for(f=[],"A"===c.nodeName&&(n=c.getAttribute("href"),r=q(c).html(),s=1,f.push({action:"redir",url:n})),o=1;o!==s;o+=1){if(d=l[o],(u=q(d)).hasClass(D)){p=d.id||z.getId(),d.id=p,n=N+"-"+p,f.push({action:"append",srctype:N,source:"#"+p});break}if("UL"===d.nodeName){if(t)throw"Recursive error, please check your code";i=te(u.children(),!0)}u.hasClass(H)&&(r=u.html())}r=r||c.nodeValue,a.id||(a.id=z.getId()),b.push({bind:a.id,label:r,actions:f,group:i})}return b},ae=function(e){var t=e.label,a="<option value='"+t+"'";return a+=p(e),e.isSelected&&(a+=" selected=selected"),a+=">"+t+"</option>"},p=function(e){var t="",a={};return a.bind=e.bind||"",a.actions=e.actions||[],t+=" data-"+N+"='"+JSON.stringify(a)+"'"},re=function(e,t,a,r,n,i){var o=z.getId(),s=e.label,l="<label for='"+o+"'>",t="<input id='"+o+"' type='"+a+"' name='"+t+"' value='"+s+"'"+p(e),e=!r&&n?"li":"div",a="<"+e+" class='"+a;return i&&(t+=" required='required'"),t+=" />",r&&(a+=" label-inline"),a+="'>",a+=r||n?t+l+s:l+t+" "+s,a+="</label></"+e+">"};r.on(K,l+", ."+D,function(e){var t,a,r,n,i,o,s=e.target,l=[];if(s===e.currentTarget&&(a=(t=q(s)).data(V))&&a.reset)for(a=a.reset,q.isArray(a)?l=a:l.push(a),n=l.length,r=0;r!==n;r+=1)(o=(i=l[r]).action)&&(!1!==i.live&&(i.live=!0),t.trigger(o+"."+J,i))}),r.on("change",t+" "+e,function(e){var t,a,r,n,i,o,s=e.currentTarget,l=q(s),c=l.nextAll(),d=q("#"+s.getAttribute("data-"+Z)),u=q("#"+s.getAttribute(_)),p=d.data($),f=l.find(":checked",l),g=l.get(0).form,h=c.length;if(h){for(a=h;0!==a;--a)(i=c[a])&&(-1<(o=p.indexOf(i.id))&&p.splice(o,1),q("#"+i.getAttribute(_)).trigger(K).trigger(F),q(i).trigger(F));d.data($,p),c.remove()}u.trigger(K).trigger(F),l.trigger(F),l.data(X,[]);var b,m,v,w,y,x,k,j=[],S=[],C=[],A=d.data(V),e=u.data(V);for(e&&A&&(A=q.extend({},A,e)),f.length&&f.val()&&A&&A.default&&(t=A.default,q.isArray(t)?j=t:j.push(t)),v=A.action,w=A.prop,O=A.actionData||{},(t=l.data(Y))&&(j=j.concat(t)),a=0,h=f.length;a!==h;a+=1)if(b=f.get(a),(b=z.getData(b,N))&&(k=b.bind,j=j.concat(b.actions),k&&(m=E.getElementById(k).getAttribute("data-"+N)))){if(m.startsWith("{")||m.startsWith("[")){try{t=JSON.parse(m)}catch(e){q.error("Bad JSON object "+m)}q.isArray(t)||(t=[t])}else(t={}).action=v,t[w]=m,t=[t=q.extend(!0,{},O,t)];j=j.concat(t)}if(!j.length)return!0;for(a=0,h=j.length;a!==h;a+=1)((n=(r=j[a]).target)&&n!==k?C:S).push(r);for(y=A.base||{},x=C.length,a=0,h=S.length;a!==h;a+=1)(r=q.extend({},y,S[a])).origin=u.get(0),r.provEvt=s,r.$selElm=f,r.form=g,x&&(r.actions=C),d.trigger(r.action+"."+J,r);return!0}),r.on("submit",t+" form",function(e){var t,a,r,n,i,o,s,l,c,d,u,p,f,g=e.currentTarget,h=q(g),b=h.data($),m=h.data(G)||[],v=b?b.length:0,w=[],y=[],x=!1;for(v&&(E=(a=q("#"+b[v-1])).data($),q("#"+E[E.length-1]).trigger(F),a.trigger(F)),t=0;t!==v;t+=1)for(l=(r=(a=q("#"+b[t])).data($)).length,s=0;s!==l;s+=1){if(n=q("#"+r[s]),i=q("#"+n.data(Z)),y.push(i),o=i.data(V),!(p=n.data(X))&&o.defaultIfNone){for(c=0,d=(p=o.defaultIfNone).length;c!==d;c+=1)(u=p[c]).origin=i.get(0),u.$selElm=i.prev().find("input, select").eq(0),u.provEvt=u.$selElm.get(0),u.form=g,i.trigger(u.action+"."+J,u);p=n.data(X)}if(p)for(c=0,d=p.length;c!==d;c+=1)(u=p[c]).form=g,a.trigger(u.action+"."+Q,u),w.push({$elm:a,data:u}),x=x||u.preventSubmit,f=u.provEvt}if(!x){for(h.find(R).removeAttr("name"),v=m.length,t=0;t!==v;t+=1)q(m[t]).remove();var k,j,S,C,A,m=[],E=h.attr("action");if(E&&0<(k=E.indexOf("?"))){for(v=(A=E.substring(k+1).split("&")).length,t=0;t!==v;t+=1)0<(S=j=A[t]).indexOf("=")&&(S=(C=j.split("=",2))[0],j=C[1]),j=q("<input type='hidden' name='"+S+"' value='"+j+"' />"),h.append(j),m.push(j.get(0));h.data(G,m)}}for(v=y.length,t=0;t!==v;t+=1)(o=(i=y[t]).data(V)).action&&w.push({$elm:i,data:o});for(v=w.length,t=0;t!==v;t+=1)(u=w[t]).data.lastProvEvt=f,u.$elm.trigger(u.data.action+"."+U,u.data);if(x)return e.preventDefault(),e.stopPropagation?e.stopImmediatePropagation():e.cancelBubble=!0,!1}),r.on("keyup",t+" select",function(e){if(-1!==navigator.userAgent.indexOf("Gecko"))return e.keyCode&&(1===e.keyCode||9===e.keyCode||16===e.keyCode||e.altKey||e.ctrlKey)||q(e.target).trigger("change"),!0}),r.on(n,l,function(e,t){var a,r,n,i,o,s,l,c,d,u,p,f,g,h,b,m,v,w,y,x,k,j,S,C=e.type;switch(e.namespace){case P:switch(C){case N:b=t,(h=e).namespace===P&&(S=h.target,m=q(S),w=(v=q(b.source)).get(0),x=b.lblselector||"."+H,j=b.itmselector||"ul:first() > li",v.hasClass(D)&&(y=z.getData(v,N),v.data(V,y),b=q.extend({},b,y)),h=b.actions||[],S=b.renderas||"select",w.id||(w.id=z.getId()),(y=v.children().first()).hasClass(M)?(k=y.html(),j="."+M+" + "+j):(k=((y=y.find(x)).length?y:v.find("> p")).html(),x=null),j=te(v.find(j)),b.outputctnrid||(b.outputctnrid=b.provEvt.parentElement.id),m.trigger(S+"."+W,{actions:h,source:w,attributes:b.attributes,outputctnrid:b.outputctnrid,label:k,lblselector:x,defaultselectedlabel:b.defaultselectedlabel,required:!b.isoptional,noreqlabel:b.noreqlabel,items:j,inline:b.inline,gcChckbxrdio:b.gcChckbxrdio}));break;case"tblfilter":!function(e,t){if(e.namespace===P){var a,r,n,i,o,s,l,c,d,u,p,f=t.column,g=t.csvextract,h=t.source,b=q(h),m=[],v=t.label,w=t.defaultselectedlabel,y=t.lblselector,x=t.fltrseq||[],k=t.limit||10;if(!b.hasClass("wb-tables-inited"))return b.one("wb-ready.wb-tables",function(){q(e.target).trigger("tblfilter."+P,t)});if((j=b.dataTable({retrieve:!0}).api()).rows({search:"applied"}).data().length<=k)return;if(p=t.renderas||"select",!f&&x.length){if(!(c=x.shift()).column)throw"Column is undefined in the filter sequence";f=c.column,g=c.csvextract,w=c.defaultselectedlabel,v=c.label,y=c.lblselector}if(a=j.column(f,{search:"applied"}),g)for(i=0,o=(r=a.data()).length;i!==o;i+=1)m=m.concat(r[i].split(","));else for(i=0,o=(r=a.nodes()).length;i!==o;i+=1)for(s=0,l=(n=q(r[i]).find("li")).length;s!==l;s+=1)m.push(q(n[s]).text());var m=m.sort().filter(function(e,t,a){return!t||e!==a[t-1]}),j=e.target,g=q(j),S=[],j=t.actions||[];for(x.length&&(u={action:"append",srctype:"tblfilter",source:h,renderas:x[0].renderas||p,fltrseq:x,limit:k}),i=0,o=m.length;i!==o;i+=1)d={label:c=m[i],actions:[{action:"tblfilter",source:h,column:f,value:c}]},u&&d.actions.push(u),S.push(d);v=v||a.header().textContent,t.outputctnrid||(t.outputctnrid=t.provEvt.parentElement.id),g.trigger(p+"."+W,{actions:j,source:b.get(0),outputctnrid:t.outputctnrid,label:v,defaultselectedlabel:w,lblselector:y,items:S,inline:t.inline,gcChckbxrdio:t.gcChckbxrdio})}}(e,t)}break;case W:switch(C){case"select":!function(e,t){var a,r,n,i,o,s,l,c=t.outputctnrid,d=q("#"+c),u=t.actions,p=t.lblselector,f=!!t.required,g=!t.noreqlabel,h=t.items,b=e.target,m=q(b),v=t.source,w=t.attributes,y=m.data(V).i18n,x=z.getId(),k="<label for='"+x+"'",c=t.inline?" wb-inv":"",e="</span>",j=t.defaultselectedlabel||!1===t.defaultselectedlabel&&!t.live?t.defaultselectedlabel:y.defaultsel;if(f&&g&&(k+=" class='required"+c+"'",e+=" <strong class='required'>("+y.required+")</strong>"),k+="><span class='field-name'>",e+="</label>",p?(p=(a=q("<div>"+t.label+"</div>")).find(p)).html(k+p.html()+e):a=q(k+t.label+e),r="<select id='"+x+"' name='"+L+x+"' class='full-width form-control mrgn-bttm-md "+B+"' data-"+Z+"='"+b.id+"' "+_+"='"+v.id+"'",f&&(r+=" required"),w&&"object"==typeof w)for(n in w)Object.prototype.hasOwnProperty.call(w,n)&&(r+=" "+n+"='"+w[n]+"'");for(r+=">",j&&(r+="<option value=''>"+j+"</option>"),n=0,i=h.length;n!==i;n+=1)if(l=h[n],n||j||(l.isSelected=!0),l.group){for(r+="<optgroup label='"+l.label+"'>",s=l.group.length,o=0;o!==s;o+=1)r+=ae(l.group[o]);r+="</optgroup>"}else r+=ae(l);f=q(r+="</select>"),d.append(a).append(f),u&&0<u.length&&f.data(Y,u),ee(m,$,x),j||f.trigger("change")}(e,t);break;case"checkbox":t.typeRadCheck="checkbox",I(e,t);break;case"radio":t.typeRadCheck="radio",I(e,t)}break;case J:switch(C){case"append":!function(e,t){if(e.namespace===J){var a=t.srctype||N;if(t.container=t.provEvt.parentNode.id,!t.source)throw"A source is required to append a field flow control.";q(e.currentTarget).trigger(a+"."+P,t)}}(e,t);break;case"redir":ee(q(t.provEvt),X,t,!0);break;case"ajax":u=e,g=(p=t).provEvt,p.live?(p.container||(f=q("<div></div>"),q(g.parentNode).append(f),p.container=f.get(0)),q(u.target).trigger("ajax."+Q,p)):(p.preventSubmit=!0,ee(q(g),X,p));break;case"tblfilter":l=t,(s=e).namespace===J&&(c=l.source,f=q(c).dataTable({retrieve:!0}).api(),u=l.column,g=parseInt(u,10),p=!!l.regex,s=!l.smart||!!l.smart,c=!l.caseinsen||!!l.caseinsen,(d=f.column(u=!0===g?g:u)).search(l.value,p,s,c).draw(),q(l.provEvt).one(F,function(){d.search("").draw()}));break;case"toggle":t.live?T(e,t):(t.preventSubmit=!0,ee(q(t.provEvt),X,t));break;case"addClass":if(!t.source||!t.class)return;t.live?q(t.source).addClass(t.class):(t.preventSubmit=!0,ee(q(t.provEvt),X,t));break;case"removeClass":if(!t.source||!t.class)return;t.live?q(t.source).removeClass(t.class):(t.preventSubmit=!0,ee(q(t.provEvt),X,t));break;case"query":A(0,t)}break;case Q:switch(C){case"redir":o=(i=t).form,(i=i.url)&&o.setAttribute("action",i);break;case"ajax":n=(i=t).clean,i.container?a=q(i.container):(r=z.getId(),a=q("<div id='"+r+"'></div>"),q(i.form).append(a),n="#"+r),n&&q(i.origin).one(F,function(){q(n).empty()}),i.trigger&&a.attr("data-trigger-wet","true"),r=i.type||"replace",a.attr("data-ajax-"+r,i.url),a.one("wb-contentupdated",function(e,t){var a=e.currentTarget,e=a.getAttribute("data-trigger-wet");a.removeAttribute("data-ajax-"+t["ajax-type"]),e&&(q(a).find(z.allSelectors).addClass("wb-init").filter(":not(#"+a.id+" .wb-init .wb-init)").trigger("timerpoke.wb"),a.removeAttribute("data-trigger-wet"))}),a.trigger("wb-update.wb-data-ajax");break;case"toggle":T(e,t);break;case"addClass":q(t.source).addClass(t.class);break;case"removeClass":q(t.source).removeClass(t.class);break;case"query":A(0,t)}}}),r.on("timerpoke.wb "+a,l,function(e){switch(e.type){case"timerpoke":case"wb-init":!function(e){var t,a,r,n=z.init(e,N,l);if(n){t=q(n),a=n.id,u.i18n[z.lang]&&(u.i18n=u.i18n[z.lang]),(s=z.getData(t,N))&&s.i18n&&(s.i18n=q.extend({},u.i18n,s.i18n)),(r=q.extend({},u,s)).defaultIfNone&&!q.isArray(r.defaultIfNone)&&(r.defaultIfNone=[r.defaultIfNone]),t.data(V,r),e=r.i18n,String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(t=t||0,e.length)===e});var i,o,s=z.getId();if(r.noForm){for(o="<div class='mrgn-tp-md'><div id='"+s+"'></div></div>",i=n.parentElement;"FORM"!==i.nodeName;)i=i.parentElement;q(i.parentElement).addClass(c)}else o=r.inline&&!r.renderas?(o="<div class='wb-frmvld "+c+"'><form><div class='input-group'><div id='"+s+"'>")+'</div><span class=\'input-group-btn\'><input type="submit" value="'+e.btn+'" class="btn btn-default mrgn-bttm-md" /></span></div> </form></div>':(o="<div class='wb-frmvld "+c+"'><form><div id='"+s+"'>")+'</div><input type="submit" value="'+e.btn+'" class="btn btn-primary mrgn-bttm-md" /> </form></div>';t.addClass("hidden"),o=q(o),t.after(o),r.noForm||(i=o.find("form"),o.trigger("wb-init.wb-frmvld")),o=q(i),ee(o,$,a),r.outputctnrid||(r.outputctnrid=s),r.source||(r.source=n),r.srctype||(r.srctype=N),r.inline=!!r.inline,r.gcChckbxrdio=!!r.gcChckbxrdio,t.trigger(r.srctype+"."+P,r),r.unhideelm&&q(r.unhideelm).removeClass("hidden"),r.hideelm&&q(r.hideelm).addClass("hidden"),z.ready(t,N),r.ext&&(r.form=o.get(0),t.trigger(r.ext+"."+d,r))}}(e)}return!0}),z.add(l)}(jQuery,document,wb),function(m,d,v){"use strict";function w(e,t,a,r){e.after('<p lang="en"><strong>JSON Manager Debug</strong> ('+t+')</p><ul lang="en"><li>JSON: <pre><code>'+JSON.stringify(a)+"</code></pre></li><li>Patches: <pre><code>"+JSON.stringify(r)+"</code></pre>")}function y(e,t,a,r){var n,i;if(m.isArray(a)||(a=[a]),m.isArray(r)||(r=[r]),n=jsonpointer.get(e,t),m.isArray(n))for(i=n.length-1;-1!==i;--i)c(n[i],a,r)||jsonpatch.apply(e,[{op:"remove",path:t+"/"+i}]);return e}var x="wb-jsonmanager",u="[data-"+x+"]",k="data-"+x+"-reload",p=[],j={},b={},S={},C={},e=v.doc,f={ops:[{name:"wb-count",fn:function(e,t,a){var r,n,i=e[t],o=0,s=this.filter||[],l=this.filternot||[];if(m.isArray(s)||(s=[s]),m.isArray(l)||(l=[l]),(s.length||l.length)&&m.isArray(i))for(r=i.length,n=0;n!==r;n+=1)c(i[n],s,l)&&(o+=1);else m.isArray(i)&&(o=i.length);jsonpatch.apply(a,[{op:"add",path:this.set,value:o}])}},{name:"wb-first",fn:function(e,t,a){t=e[t];m.isArray(t)&&0!==t.length&&jsonpatch.apply(a,[{op:"add",path:this.set,value:t[0]}])}},{name:"wb-last",fn:function(e,t,a){t=e[t];m.isArray(t)&&0!==t.length&&jsonpatch.apply(a,[{op:"add",path:this.set,value:t[t.length-1]}])}},{name:"wb-nbtolocal",fn:function(e,t,a){var r=e[t],n=this.locale||d.wb.lang,e=this.suffix||"",t=this.prefix||"";"string"==typeof r&&(r=parseFloat(r),isNaN(r))||jsonpatch.apply(a,[{op:"replace",path:this.path,value:t+r.toLocaleString(n)+e}])}},{name:"wb-toDateISO",fn:function(e,t,a){this.set?jsonpatch.apply(a,[{op:"add",path:this.set,value:v.date.toDateISO(e[t])}]):jsonpatch.apply(a,[{op:"replace",path:this.path,value:v.date.toDateISO(e[t])}])}},{name:"wb-toDateTimeISO",fn:function(e,t,a){this.set?jsonpatch.apply(a,[{op:"add",path:this.set,value:v.date.toDateISO(e[t],!0)}]):jsonpatch.apply(a,[{op:"replace",path:this.path,value:v.date.toDateISO(e[t],!0)}])}}],opsArray:[{name:"wb-toDateISO",fn:function(e){for(var t=this.set,a=this.path,r=e.length,n=0;n!==r;n+=1)t?jsonpatch.apply(e,[{op:"wb-toDateISO",set:"/"+n+t,path:"/"+n+a}]):jsonpatch.apply(e,[{op:"wb-toDateISO",path:"/"+n+a}])}},{name:"wb-toDateTimeISO",fn:function(e){for(var t=this.set,a=this.path,r=e.length,n=0;n!==r;n+=1)t?jsonpatch.apply(e,[{op:"wb-toDateTimeISO",set:"/"+n+t,path:"/"+n+a}]):jsonpatch.apply(e,[{op:"wb-toDateTimeISO",path:"/"+n+a}])}}],opsRoot:[],settings:{}},c=function(e,t,a){var r,n,i,o=t.length,s=a.length,l=!1;if(o||s){for(r=0;r<o;r+=1)if(n=t[r],i=g(jsonpointer.get(e,n.path),n.value),n.optional)l=l||i;else{if(!i)return!1;l=!0}if(o&&!l)return!1;for(r=0;r<s;r+=1)if(n=a[r],(i=g(jsonpointer.get(e,n.path),n.value))&&!n.optional||i&&n.optional)return!1}return!0},g=function(e,t){switch(typeof e){case"undefined":return!1;case"boolean":case"string":case"number":return e===t;case"object":if(null===e)return null===t;var a,r;if(m.isArray(e)){if(m.isArray(t)||e.length!==t.length)return!1;for(a=0,r=e.length;a<r;a++)if(!g(e[a],t[a]))return!1;return!0}var n=i(t).length;if(i(e).length!==n)return!1;for(a=0;a<n;a++)if(!g(e[a],t[a]))return!1;return!0;default:return!1}},i=function(e){if(m.isArray(e)){for(var t=new Array(e.length),a=0;a<t.length;a++)t[a]=""+a;return t}if(Object.keys)return Object.keys(e);for(var r in t=[],e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};v.ie&&(Number.prototype.toLocaleString=function(e){for(var t=this.toString().split("."),a=t[0],r=t[1],n=a.length,t=n%3||3,i=a.substr(0,t),e="fr"===e,o=e?" ":",",s=t;s<n;s+=3)i=i+o+a.substr(s,3);return i=r.length?e?i+","+r:i+"."+r:i}),e.on("json-failed.wb",u,function(e){var t=e.target;t===e.currentTarget&&((t=m(t)).addClass("jsonfail"),v.ready(t,x))}),e.on("json-fetched.wb",u,function(e){var t,a,r,n,i,o,s,l,c,d,u,p=e.target,f=m(p),g=e.fetch.response,h=m.isArray(g);if(p===e.currentTarget){a="["+(t=v.getData(f,x)).name+"]",c=t.patches||[],u=t.fpath,d=t.filter||[],e=t.filternot||[],m.isArray(c)||(c=[c]),g=h?m.extend([],g):m.extend({},g),u&&(g=y(g,u,d,e)),c.length&&(h&&t.wraproot&&((o={})[t.wraproot]=g,g=o),jsonpatch.apply(g,c)),t.debug&&w(f,"initEvent",g,c);try{j[a]=g}catch(e){return}if(b[a]=t,p.hasAttribute(k)&&(p.removeAttribute(k),(o=C[a])&&f.trigger(o)),!t.wait&&S[a])for(i=(s=S[a]).length,n=0;n!==i;n+=1){if((l=(o=s[n]).selector).length)try{r=jsonpointer.get(g,l)}catch(e){throw a+" - JSON selector not found: "+l}else r=g;m("#"+o.callerId).trigger({type:"json-fetched.wb",fetch:{response:r,status:"200",refId:o.refId,xhr:null}},this)}v.ready(f,x)}}),e.on("patches.wb-jsonmanager",u,function(e){var t,a,r,n,i,o,s,l,c,d=e.target,u=m(d),p=e.patches,f=e.fpath,g=e.filter||[],h=e.filternot||[],b=!!e.cumulative;if(d===e.currentTarget&&m.isArray(p)){if(!(t=v.getData(u,x)))return!0;if(a="["+t.name+"]",d.hasAttribute(k))return C[a]=e,!0;if(!S[a])throw"Applying patched on undefined dataset name: "+a;for(r=j[a],b||(r=m.extend(!0,m.isArray(r)?[]:{},r)),f&&(r=y(r,f,g,h)),jsonpatch.apply(r,p),t.debug&&w(u,"patchesEvent",r,p),s=(i=S[a]).length,o=0;o!==s;o+=1){if((c=(l=i[o]).selector).length)try{n=jsonpointer.get(r,c)}catch(e){throw a+" - JSON selector not found: "+c}else n=r;m("#"+l.callerId).trigger({type:"json-fetched.wb",fetch:{response:n,status:"200",refId:l.refId,xhr:null}},this)}}}),e.on("postpone.wb-jsonmanager",function(t){var e=t.postpone,a=e.dsname,r=e.callerId,n=e.refId,t=e.selector;if(S[a]||(S[a]=[]),S[a].push({callerId:r,refId:n,selector:t}),j[a]&&!b[a].wait){if(e=j[a],t.length)try{e=jsonpointer.get(e,t)}catch(e){throw a+" - JSON selector not found: "+t}m("#"+r).trigger({type:"json-fetched.wb",fetch:{response:e,status:"200",refId:n,xhr:null}},this)}}),e.on("op.action.wb-fieldflow",".wb-fieldflow",function(e,t){var a,r,n,i;t.op&&(t.preventSubmit=!0,a=m(t.provEvt),r="wb-fieldflow-submit",n=t,(t=!(t=a.data(r))||i?[]:t).push(n),a.data(r,t))}),e.on("op.submit.wb-fieldflow",".wb-fieldflow",function(e,t){var a,r=t.op,t=t.source;if(!r)return!0;m.isArray(r)?a=r:(a=[]).push(r),m(t).trigger({type:"patches.wb-jsonmanager",patches:a})}),e.on("timerpoke.wb wb-init.wb-jsonmanager",u,function(e){var t,a,r,n,i,o,s,l,e=v.init(e,x,u),c=d[x]||{};e&&(t=m(e),Modernizr.load({load:"site!deps/json-patch"+v.getMode()+".js",testReady:function(){return d.jsonpatch},complete:function(){var e=v.getData(t,x);if(!f.registered){if(a=f.ops.concat(c.ops||[]),r=f.opsArray.concat(c.opsArray||[]),n=f.opsRoot.concat(c.opsRoot||[]),a.length)for(i=0,o=a.length;i!==o;i++)s=a[i],jsonpatch.registerOps(s.name,s.fn);if(r.length)for(i=0,o=r.length;i!==o;i++)s=r[i],jsonpatch.registerOpsArray(s.name,s.fn);if(n.length)for(i=0,o=n.length;i!==o;i++)s=n[i],jsonpatch.registerOpsRoot(s.name,s.fn);f.settings=m.extend({},f.settings,c.settings||{}),f.registered=!0}if(!(l=e.name)||l in p)throw"Dataset name must be unique";p.push(l),(l=e.url)?(t.trigger({type:"json-fetch.wb",fetch:{url:l,nocache:e.nocache,nocachekey:e.nocachekey}}),35===l.charCodeAt(0)&&91===l.charCodeAt(1)&&v.ready(t,x)):(t.trigger({type:"json-fetch.wb"}),v.ready(t,x))}}))}),v.add(u)}(jQuery,window,wb),function(x,k,j){"use strict";function S(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function n(e){e=e.target,e=k.getElementById(e.getAttribute("list")),Modernizr.load({test:Modernizr.stringnormalize,nope:["site!deps/unorm"+j.getMode()+".js"]}),x(e).trigger({type:"json-fetch.wb",fetch:{url:e.dataset.wbSuggest}})}function i(e){var t=e.target,a=k.getElementById(t.getAttribute("list")),r=e.target.value,n=e.which;switch(C&&clearTimeout(C),e.type){case"change":C=setTimeout(E.bind(a,r),250);break;case"keyup":e.ctrlKey||e.altKey||e.metaKey||(8===n||32===n||47<n&&n<91||95<n&&n<112||159<n&&n<177||187<n&&n<223)&&(C=setTimeout(E.bind(a,r),250))}}var C,o=j.doc,s="wb-suggest",l="[data-"+s+"]",A=5,E=function(e,t,a){var r,n,i,o,s,l,c,d,u,p=a||JSON.parse(this.dataset.wbSuggestions||[]),f=this.dataset.wbFilterType||"any",g=p.length,h=[],b=this.childNodes,m=b.length-1,v=x("[list="+this.id+"]"),w=v.get(0);if(!p.length&&A&&(A-=1,C&&clearTimeout(C),C=setTimeout(E(e,t,a),250)),t=t||parseInt(this.dataset.wbLimit||g),e){switch(f){case"startWith":e="^"+e;break;case"word":e="^"+e+"|\\s"+e}r=new RegExp(e,"i")}if(!e||e.length<2)!function(){for(var e,t=this.children,a=t.length-1;0<a;a-=1)1===(e=t[a]).nodeType&&"TEMPLATE"!==e.nodeName&&this.removeChild(e)}.call(this),b=[];else for(c=m;0!==c;c-=1)1===(d=b[c]).nodeType&&"OPTION"===d.nodeName&&((u=d.getAttribute("value"))&&u.match(r)?h.push(S(u)):this.removeChild(d));var y=this.querySelector("template");for(y&&!y.content&&j.tmplPolyfill(y),n=0;n<g&&h.length<t;n+=1)i=p[n],o=S(i),-1!==h.indexOf(o)||e&&!i.match(r)||(h.push(o),y?l=(s=y.content.cloneNode(!0)).querySelector("option"):(s=k.createDocumentFragment(),l=k.createElement("OPTION"),s.appendChild(l)),l.setAttribute("label",i),l.setAttribute("value",i),this.appendChild(s));v.trigger("wb-update.wb-datalist"),w.value=w.value};o.on("timerpoke.wb wb-init.wb-suggest json-fetched.wb",l,function(e){var t,a,r=e.target;if(e.currentTarget===r)switch(e.type){case"timerpoke":case"wb-init":t=e,a=j.init(t,s,l),t="[list="+t.target.id+"]",a&&(Modernizr.addTest("stringnormalize","normalize"in String),o.one("focus",t,n),(a.dataset.wbLimit||a.dataset.wbFilterType)&&o.on("change keyup",t,i),j.ready(x(a),s));break;case"json-fetched":!function(e){this.dataset.wbSuggestions=JSON.stringify(e),delete this.dataset.wbSuggest,E.call(this,k.querySelector("[list="+this.id+"]").value)}.call(r,e.fetch.response)}return!0}),j.add(l)}(jQuery,document,wb),function(s,l,c){"use strict";var d,u="wb-urlmapping",a="[data-"+u+"]",r="domapping."+u,n=c.doc;n.on(r,a,function(e){var t,a,r,n=s(e.target),i=function(){for(var e={},t=/\+/g,a=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(t," "))},n=l.location.search.substring(1),i=a.exec(n);i;)e[r(i[1])]=r(i[2]),i=a.exec(n);return e}(),o=s.extend({},l[u]||{},c.getData(n,u));for(t in i)if("object"==typeof(r=o[t+"="+(a=i[t])]||o[t])&&(n.trigger({type:"do.wb-actionmng",actions:{action:"withInput",actions:r,cValue:a,dntwb:n[0]!==d}}),!o.multiplequery))break}),n.on("timerpoke.wb wb-init.wb-urlmapping",a,function(e){var t,e=c.init(e,u,a);e&&(t=s(e),d=d||e,c.ready(t,u),c.isReady?t.trigger(r):n.one("wb-ready.wb",function(){t.trigger(r)}))}),c.add(a)}(jQuery,window,wb),function(n,i){"use strict";var o="adapter-wb5-click",s="[data-wb5-click][data-toggle]",l="wb-postback";i.doc.on("timerpoke.wb wb-init.adapter-wb5-click",s,function(e){var t=i.init(e,o,s);if(t){var a,r=(a=n(t)).data("wb5-click").split("@"),e=r[0],t=r[1],r=n(t),t=i.getData(a,"toggle");if("postback"!==e||"FORM"!==r[0].nodeName||!t.selector)return console.log("Init failed for adapter wb5 click"),void i.ready(a,o);r.addClass(l),r.attr("data-"+l,JSON.stringify({success:t.selector,failure:t.selector})),r.parent().removeClass("gc-rprt-prblm-tggl"),a.removeAttr("data-wb5-click").removeAttr("toggle").removeAttr("data-toggle").removeAttr("aria-controls").removeClass("wb-toggle"),r.trigger("wb-init."+l),i.ready(a,o)}}),i.add(s)}(jQuery,(window,wb)),function(r,n){"use strict";var a,i,m,o,v,s="gcweb-menu",w="."+s,e=n.doc,t=w+" [data-ajax-replace],"+w+" [data-ajax-append],"+w+" [data-ajax-prepend],"+w+" [data-wb-ajax]",l=350,c={en:"Press the SPACEBAR to expand or the escape key to collapse this menu. Use the Up and Down arrow keys to choose a submenu item. Press the Enter or Right arrow key to expand it, or the Left arrow or Escape key to collapse it. Use the Up and Down arrow keys to choose an item on that level and the Enter key to access it.",fr:"Appuyez sur la barre d'espacement pour ouvrir ou sur la touche d'échappement pour fermer le menu. Utilisez les flèches haut et bas pour choisir un élément de sous-menu. Appuyez sur la touche Entrée ou sur la flèche vers la droite pour le développer, ou sur la flèche vers la gauche ou la touche Échap pour le réduire. Utilisez les flèches haut et bas pour choisir un élément de ce niveau et la touche Entrée pour y accéder."},d=function(e){var t=r(e).parentsUntil(w).parents(),a=document.querySelector("html").className;m=-1!==a.indexOf("smallview"),o=-1!==a.indexOf("mediumview"),(m||o)&&u(!1,o),e.previousElementSibling.setAttribute("aria-label",c),n.ready(t,s)};function y(e){var t;"true"!==e.getAttribute("aria-expanded")&&((t=e.parentElement.parentElement.querySelector("[aria-haspopup][aria-expanded=true]:not([data-keep-expanded=md-min])"))&&!m&&x(t,!0),e.setAttribute("aria-expanded","true"),i=e,setTimeout(function(){i=!1},l))}function x(e,t){if(e){if(e.hasAttribute("aria-haspopup")||(e=e.previousElementSibling),!t){var a=e.nextElementSibling.querySelector("[role=menuitem]:focus"),t=e.parentElement.parentElement.querySelector("[role=menuitem]:focus");if(a||t===e)return}e.setAttribute("aria-expanded","false")}}function u(e,t){for(var a,r=document.querySelectorAll("[role=menu] [role=menu] [role=menuitem][aria-haspopup=true]"),n=r.length,i=t?"true":"false",o=e?"vertical":"horizontal",s=0;s<n;s++)a=r[s].nextElementSibling.querySelector("[role=menuitem]:focus")?"true":i,r[s].setAttribute("aria-expanded",a),r[s].parentElement.previousElementSibling.setAttribute("aria-orientation",o)}e.on("mouseenter",w+" ul [aria-haspopup]",function(e){var t;m||(clearTimeout(void 0),"md-min"!==(t=e.currentTarget).dataset.keepExpanded&&(clearTimeout(a),a=setTimeout(function(){y(t)},l)))}),e.on("focusin",w+" ul [aria-haspopup]",function(e){m?v=!1:y(e.currentTarget)}),e.on("mouseenter focusin",w+" [aria-haspopup] + [role=menu]",function(e){"md-min"!==e.currentTarget.previousElementSibling.dataset.keepExpanded&&(m||i===e.currentTarget||clearTimeout(void 0))}),e.on("mouseleave",w+" [aria-haspopup]",function(){clearTimeout(a)}),e.on("click",w+" [aria-haspopup]",function(e){var t=e.currentTarget;v?v=!1:(!m&&"BUTTON"!==t.nodeName||("true"===t.getAttribute("aria-expanded")?i!==t&&x(t,!0):(y(t),(t=t.nextElementSibling.querySelector("[role=menuitem]")).focus(),t.setAttribute("tabindex","0"))),e.stopImmediatePropagation(),e.preventDefault())}),e.on(n.resizeEvents,function(e){switch(e.type){case"xxsmallview":case"xsmallview":case"smallview":u(!(m=!0),!1);break;case"mediumview":u(m=!1,!0);break;case"largeview":case"xlargeview":default:u(!(m=!1),!0)}}),e.on("keydown",function(e){27===e.keyCode&&x(document.querySelector(w+" button"))}),e.on("keydown",w+" button, "+w+" [role=menuitem]",function(e){var t,a=e.currentTarget,r=9===(g=e.charCode||e.keyCode)?"tab":13===g||32===g?"enter":27===g?"esc":39===g?"right":37===g?"left":40===g?"down":38===g&&"up",n=document.querySelector("[role=menuitem]:focus")||a,i=n.parentElement,o=i.parentElement,s="BUTTON"===n.nodeName;if("tab"!==r)if(s&&"enter"===r&&"true"===a.getAttribute("aria-expanded"))x(a,v=!0);else{n.nextElementSibling&&(t=n.nextElementSibling.querySelector("[role='menuitem']"));for(var l,c,d,u,p,f=i.nextElementSibling?(f=i.nextElementSibling.querySelector("[role=menuitem]"))||i.nextElementSibling.nextElementSibling.querySelector("[role=menuitem]"):!m&&n.dataset.keepExpanded&&t?t:(!m&&o.previousElementSibling.dataset.keepExpanded?o.parentElement.parentElement:o).querySelector("[role=menuitem]"),g=o.previousElementSibling,h=i.previousElementSibling?(h=i.previousElementSibling.querySelector("[role=menuitem]"))||i.previousElementSibling.previousElementSibling.querySelector("[role=menuitem]"):!m&&o.lastElementChild.querySelector("[role=menuitem]").dataset.keepExpanded?o.lastElementChild.querySelector("[role=menuitem]").nextElementSibling.lastElementChild.querySelector("[role=menuitem]"):!m&&o.previousElementSibling.dataset.keepExpanded&&g?g:(s?n.nextElementSibling:o).lastElementChild.querySelector("[role=menuitem]"),b=i;b.nextElementSibling;)if("separator"===(b=b.nextElementSibling).getAttribute("role")){l=!(!b.hasAttribute("aria-orientation")||"vertical"!==b.getAttribute("aria-orientation")),c=b.nextElementSibling.querySelector("[role=menuitem]");break}for(b=i;b.previousElementSibling;){if("separator"===(b=b.previousElementSibling).getAttribute("role")){if(u)break;d=!(!b.hasAttribute("aria-orientation")||"vertical"!==b.getAttribute("aria-orientation")),u=b.previousElementSibling}u=u&&b}if(u=u&&u.querySelector("[role=menuitem]"),s||n.setAttribute("tabindex","-1"),"down"===r&&f)p=f;else if("up"===r&&h)p=h;else if(!s&&"right"===r&&t||"enter"===r&&t)p=t;else if(l&&"right"===r)p=c;else if(d&&"left"===r)p=u;else if(!s&&"left"===r||!s&&"esc"===r)p=g;else if("tab"===r)return;"left"!==r&&"esc"!==r||(!s&&m&&"true"===p.getAttribute("aria-expanded")?p.setAttribute("aria-expanded","false"):s&&a.setAttribute("aria-expanded","false")),p&&(!m&&!s||"true"!==(s=p.parentElement.parentElement.previousElementSibling).getAttribute("aria-expanded")&&y(s),p.setAttribute("tabindex","0"),p.focus(),e.stopImmediatePropagation(),e.preventDefault())}else x(document.querySelector(w+" button"),!0)}),e.on("ajax-fetched.wb ajax-failed.wb",t,function(e){var t=e.target;e.currentTarget===t&&d(t)}),e.on("timerpoke.wb wb-init.gcweb-menu",w,function(e){e=n.init(e,s,w);e&&(c[n.lang]?c=c[n.lang]:c.en&&(c=c.en),e.querySelector(t)||d(e.querySelector("[role=menu]")))}),n.add(w)}(jQuery,wb);